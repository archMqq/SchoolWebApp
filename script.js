document.addEventListener("DOMContentLoaded", () => {
    const overlay = document.getElementById("overlay");
    const popup = document.getElementById("popup");
    const popupContent = document.getElementById("popupContent");
    const closePopup = document.getElementById("closePopup");

    if (!overlay || !popup || !popupContent || !closePopup) {
        console.error("Некоторые элементы не найдены в DOM!");
        return;
    }

    const openPopup = (content) => {
        if (!content) {
            console.error("Контент для всплывающего окна отсутствует!");
            return;
        }
        popupContent.innerHTML = content; 
        overlay.style.display = "flex";
    };

    const closePopupHandler = () => {
        overlay.style.display = "none";
        popupContent.innerHTML = ""; // Очищаем содержимое после закрытия
    };

    const addPopupButtonListener = (buttonId, content) => {
        const button = document.getElementById(buttonId);
        if (!button) {
            console.error(`Кнопка с ID "${buttonId}" не найдена!`);
            return;
        }
        button.addEventListener("click", () => openPopup(content));
    };

    addPopupButtonListener("memoryButton", "<h2>Текст про память</h2><p>Эффективное запоминание слов основывается на понимании, что язык мозга – это образы, прежде всего зрительные. Чтобы запомнить слово, его нужно представить, и чем чётче вы это сделаете, тем лучше будет результат. Важнейший элемент памяти – это ассоциации. Чем интереснее и ярче ассоциация, тем выше вероятность запомнить слово. Существуют приёмы, такие как цепочка, матрёшка, метод Цицерона и СЧС, которые позволяют создавать искусственные ассоциации. Каждый из них имеет свои преимущества и недостатки, и если вы освоите их, то легко сможете применять на практике. Самый простой способ запоминания слов – это попарное соединение образов. Например, чтобы запомнить список слов: стул, холодильник, телефон, тумбочка, пирожное, связываем их последовательно. Представьте, что на стуле стоит холодильник, на холодильнике лежит телефон и звонит, а рядом – тумбочка, на которой лежит пирожное. Важно, чтобы размеры предметов были сопоставимы, например, телефон должен быть размером с холодильник. При этом важно придерживаться одной системы – второй образ всегда должен быть сверху, справа или как-то проникать в первый. Для избежания забывания начала списка важно закрепить первое слово в своём воображении: представить его перед собой, положить на стол или даже «зажать» в руке. Такие простые и последовательные действия помогут выстроить чёткую систему, облегчающую запоминание.</p>");
    addPopupButtonListener("planButton", "<h2>План по запоминанию</h2><p>1. Расписать все элементы, объединенные части, которые требуется запомнить (образ-слово, произношения, артикли, множественное число, количество букв, дополнительные знаки и тому подобное);<br>2. Найти место на локации, где будет лежать case;<br>3. Сделать 5-10 вариантов of cases и выбрать наилучший;<br>4. Пропустить через 5 органов чувств;<br>5. Закрепить на локации полученный case;<br>6. Повторение по методу Эббинсгауза.</p>");
    addPopupButtonListener("instructionsButton", "<h2>Инструкция</h2><p>Перед началом работы с ботом вы можете настроить его работу. Выбрать время и количество слов и чисел.<br>Среди функций бота имеются: толкования терминов, числа, показ ассоциаций для слов, упражнения на скорочтение и слова для запоминания.</p>");

    closePopup.addEventListener("click", closePopupHandler);

    overlay.addEventListener("click", (e) => {
        if (e.target === overlay) closePopupHandler();
    });
});
